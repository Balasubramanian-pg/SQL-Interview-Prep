Let's walk through a complex interview question using procedural decomposition:

**Question:** Given tables `employees`, `departments`, and `salaries`, find the department with the highest average salary for employees who have been with the company for at least 5 years.

**Procedural Decomposition:**

1. **Understand the Problem:**
    - Need to find a single department (output is department name)
    - Need to calculate average salaries by department
    - Need to filter employees by tenure (≥ 5 years)
    - Need to identify the maximum average
2. **Identify Components:**
    - Tables: employees, departments, salaries
    - Joins: employees-departments, employees-salaries
    - Filter: tenure ≥ 5 years
    - Aggregation: AVG(salary) by department
    - Sorting: highest average salary
3. **Plan the Approach:**
    - Start with employees table
    - Join with departments
    - Join with salaries
    - Filter by tenure
    - Group by department
    - Calculate averages
    - Sort and limit to get the highest
4. **Build the Solution:**

```SQL
-- First, identify employees with 5+ years tenure
WITH long_term_employees AS (
    SELECT
        employee_id,
        department_id
    FROM
        employees
    WHERE
        DATEDIFF(YEAR, hire_date, CURRENT_DATE) >= 5
),

-- Next, calculate average salary by department
dept_avg_salaries AS (
    SELECT
        d.department_name,
        AVG(s.salary) AS avg_salary
    FROM
        long_term_employees lte
    JOIN
        departments d ON lte.department_id = d.department_id
    JOIN
        salaries s ON lte.employee_id = s.employee_id
    GROUP BY
        d.department_name
)

-- Finally, get the department with highest average
SELECT
    department_name,
    avg_salary
FROM
    dept_avg_salaries
ORDER BY
    avg_salary DESC
LIMIT 1;
```

1. **Test and Refine:**
    - Consider edge cases: What if there are no employees with 5+ years tenure?
    - Optimization: Is the CTE approach most efficient?
    - Alternative: Could use window functions