## Understanding NULL Values in SQL

NULL represents missing or unknown data in SQL databases. Here's how to work with NULL values effectively:

## 1. Filtering NULL Values

```SQL
-- These won't work (NULL is not equal to anything, even itself)
SELECT * FROM customern WHERE NULL = NULL;  -- Returns nothing
SELECT * FROM customern WHERE age = NULL;   -- Returns nothing

-- Correct ways to filter NULLs
SELECT * FROM customern WHERE dob IS NULL;      -- Finds NULL values
SELECT * FROM customern WHERE dob IS NOT NULL;  -- Excludes NULL values
```

## 2. Handling NULL Values with ISNULL and COALESCE

### ISNULL (SQL Server) - Replaces NULL with specified value

```SQL
SELECT
    *,
    ISNULL(age, 11) AS age_with_default,  -- Replaces NULL age with 11
    ISNULL(dob, '2025-01-01') AS dob_with_default  -- Replaces NULL dob
FROM customern;
```

### COALESCE (Standard SQL) - Returns first non-NULL value

```SQL
SELECT
    *,
    COALESCE(dob, NULL, '2020-01-01') AS coalesced_dob1,
    COALESCE(dob, '2020-01-03', NULL, '2020-01-01') AS coalesced_dob2
FROM customern;
```

**Key Difference**:

- `ISNULL` takes exactly 2 parameters
- `COALESCE` can take multiple parameters and returns first non-NULL

## 3. Aggregate Functions and NULLs

```SQL
-- COUNT ignores NULL values by default
SELECT COUNT(age) FROM customern;  -- Counts only non-NULL ages

-- To count all rows including NULLs:
SELECT COUNT(ISNULL(age, 0)) FROM customern;  -- Counts all rows
-- OR better:
SELECT COUNT(*) FROM customern;  -- Counts all rows regardless of NULLs

-- AVG ignores NULL values
SELECT AVG(age) FROM customern;  -- Divides by number of non-NULL ages

-- To include NULLs as 0 in average:
SELECT AVG(ISNULL(age, 0)) FROM customern;  -- Divides by total rows
```

## 4. Inserting NULL Values

```SQL
-- Explicit NULL insertion
INSERT INTO customern VALUES (7, 'John', 'M', NULL, NULL);

-- Implicit NULL insertion (if columns are nullable)
INSERT INTO customern (customer_id, customer_name) VALUES (8, 'Jane');
```

## Best Practices for NULL Handling

1. **Filtering**: Always use `IS NULL` or `IS NOT NULL` for NULL comparisons
2. **Data Quality**: Consider using `COALESCE` or `ISNULL` to provide default values
3. **Aggregations**: Be aware that most aggregate functions ignore NULLs
4. **Design**: Make columns NOT NULL when the data should always exist
5. **Reporting**: Handle NULLs explicitly in reports to avoid confusion

## Additional NULL Functions

### NULLIF (Returns NULL if two expressions are equal)

```SQL
SELECT NULLIF(age, 30) FROM customern;  -- Returns NULL where age is 30
```

### CASE for Complex NULL Handling

```SQL
SELECT
    customer_name,
    CASE
        WHEN age IS NULL THEN 'Age not provided'
        WHEN age < 18 THEN 'Minor'
        ELSE 'Adult'
    END AS age_category
FROM customern;
```