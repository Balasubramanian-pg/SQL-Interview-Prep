Here's the SQL query with the WITH clause to create temporary tables `emp` and `dep` and then select from the `emp` table:

```SQL
WITH emp AS (
    SELECT 1 AS emp_id, 1000 AS emp_salary, 1 AS dep_id
    UNION ALL SELECT 2 AS emp_id, 2000 AS emp_salary, 2 AS dep_id
    UNION ALL SELECT 3 AS emp_id, 3000 AS emp_salary, 3 AS dep_id
    UNION ALL SELECT 4 AS emp_id, 4000 AS emp_salary, 4 AS dep_id
),
dep AS (
    SELECT 1 AS dep_id, 'd1' AS dep_name
    UNION ALL SELECT 2 AS dep_id, 'd2' AS dep_name
    UNION ALL SELECT 3 AS dep_id, 'd3' AS dep_name
    UNION ALL SELECT 4 AS dep_id, 'd4' AS dep_name
)
SELECT * FROM emp;
```

This query:

1. Creates a temporary `emp` table with 4 employees (IDs 1-4) with their salaries and department IDs
2. Creates a temporary `dep` table with 4 departments (IDs 1-4) with their names
3. Selects all columns from the `emp` table

The output will be:

|   |   |   |
|---|---|---|
|emp_id|emp_salary|dep_id|
|1|1000|1|
|2|2000|2|
|3|3000|3|
|4|4000|4|

If you want to join these temporary tables, you could modify the final SELECT to:

```SQL
SELECT e.emp_id, e.emp_salary, d.dep_name
FROM emp e
JOIN dep d ON e.dep_id = d.dep_id;
```

Which would give you:

|   |   |   |
|---|---|---|
|emp_id|emp_salary|dep_name|
|1|1000|d1|
|2|2000|d2|
|3|3000|d3|
|4|4000|d4|
