## 3. Difference between **WHERE** and **HAVING** clauses.

Here’s a clear explanation of the differences between the **WHERE** and **HAVING** clauses in SQL:

| Feature                | **WHERE**                                      | **HAVING**                                      |
|------------------------|------------------------------------------------|-------------------------------------------------|
| **Purpose**            | Filters **rows** before grouping.              | Filters **groups** after grouping.              |
| **Used With**          | `SELECT`, `UPDATE`, `DELETE` statements.        | Only with `GROUP BY` (aggregated data).         |
| **Applies To**         | Individual rows in the table.                  | Results of aggregate functions (e.g., `SUM`, `COUNT`). |
| **Syntax Position**    | Comes before `GROUP BY`.                        | Comes after `GROUP BY`.                         |
| **Example**            | `WHERE age > 30`                               | `HAVING COUNT(*) > 5`                            |
| **Aggregate Functions**| **Cannot** use aggregate functions (e.g., `SUM`, `AVG`). | **Can** use aggregate functions.               |

### **Key Callouts**

<ins>**Callout 1: Filtering Stage**</ins>
- **WHERE**: Filters **before** data is grouped (e.g., exclude rows with `salary < 50000`).
- **HAVING**: Filters **after** grouping (e.g., only show departments with `AVG(salary) > 70000`).

<ins>**Callout 2: Aggregate Functions**</ins>
- **WHERE**: Cannot use `SUM`, `COUNT`, `AVG`, etc.
  ```sql
  -- ❌ Invalid: WHERE SUM(salary) > 100000
  ```
- **HAVING**: Designed for aggregate functions.
  ```sql
  -- ✅ Valid: HAVING SUM(salary) > 100000
  ```

<ins>**Callout 3: Order in Query**</ins>
- **WHERE** → `GROUP BY` → **HAVING** → `SELECT` → `ORDER BY`.
  ```sql
  SELECT department, AVG(salary)
  FROM employees
  WHERE hire_date > '2020-01-01'  -- Filters rows first
  GROUP BY department
  HAVING AVG(salary) > 70000;     -- Filters groups after aggregation
  ```

<ins>**Callout 4: Performance**</ins>
- **WHERE** reduces the dataset early, improving performance.
- **HAVING** operates on the final grouped result, so it’s less efficient for large datasets.

<ins>**Callout 5: Common Mistake**</ins>
- Using **HAVING** for row-level filtering (e.g., `HAVING age > 30`) is incorrect—use **WHERE** instead.

---
**Example:**
```sql
-- Find departments with more than 3 employees earning over $60k
SELECT department, COUNT(*) AS employee_count
FROM employees
WHERE salary > 60000          -- Filter rows first
GROUP BY department
HAVING COUNT(*) > 3;          -- Filter groups after aggregation
```

**Summary:**
- Use **WHERE** to filter **rows**.
- Use **HAVING** to filter **groups** after aggregation.
