## 13. Difference between **stored procedure** and **function** in SQL.


| Feature                | **Stored Procedure**                          | **Function**                                      |
|------------------------|-----------------------------------------------|---------------------------------------------------|
| **Purpose**            | Perform actions (e.g., insert, update, delete). | Compute and return a value (scalar or table).    |
| **Return Value**       | Can return zero, one, or multiple values (via parameters). | **Must** return a single value or table.         |
| **Usage in SQL**       | Called using `EXEC` or `CALL`.               | Called within SQL statements (e.g., `SELECT`).   |
| **Transaction Control**| Supports transactions (commit/rollback).      | Typically read-only (no transaction control).    |
| **Output Parameters**  | Supports multiple output parameters.          | Returns only one value or result set.             |
| **DML Operations**     | Can perform DML (INSERT, UPDATE, DELETE).     | Usually restricted to SELECT (read-only).         |
| **Usage Context**      | Used for business logic, workflows.           | Used for calculations, transformations.           |
| **Example**            | `EXEC sp_update_salary @emp_id, @new_salary`. | `SELECT get_employee_bonus(@emp_id)`.             |


### **Key Callouts**

<ins>**Callout 1: Return Behavior**</ins>
- **Stored Procedure**: Can return multiple values or none (via `OUT` parameters).
- **Function**: **Must** return a value (scalar, table, or inline result).

<ins>**Callout 2: How Theyâ€™re Called**</ins>
- **Stored Procedure**: Standalone call (`EXEC procedure_name`).
- **Function**: Embedded in SQL (`SELECT function_name()`).

<ins>**Callout 3: Transaction Handling**</ins>
- **Stored Procedure**: Can manage transactions (commit/rollback).
- **Function**: Avoids side effects; usually read-only.

<ins>**Callout 4: Performance**</ins>
- **Stored Procedure**: Better for complex operations or batch processing.
- **Function**: Optimized for reuse in queries (e.g., calculations).

<ins>**Callout 5: Use Cases**</ins>
- Use a **stored procedure** for data modification or multi-step workflows.
- Use a **function** for reusable calculations or transformations in queries.
- 
**Example:**
- **Stored Procedure**:
  ```sql
  CREATE PROCEDURE update_salary(IN emp_id INT, IN new_salary DECIMAL)
  BEGIN
    UPDATE employees SET salary = new_salary WHERE id = emp_id;
  END;
  ```
- **Function**:
  ```sql
  CREATE FUNCTION calculate_bonus(emp_id INT) RETURNS DECIMAL
  BEGIN
    DECLARE bonus DECIMAL;
    SELECT salary * 0.1 INTO bonus FROM employees WHERE id = emp_id;
    RETURN bonus;
  END;
  ```
