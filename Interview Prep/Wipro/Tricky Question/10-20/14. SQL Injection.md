## 14. Explain **SQL injection** and ways to prevent it.

SQL injection is a web security vulnerability where an attacker uses malicious SQL code to manipulate a database, often leading to unauthorized access, data theft, or data destruction. It occurs when an application takes user input and directly includes it in a SQL query without proper validation or sanitization.

A classic example is a login form where a user's input for username and password is used to build a query like this:

`SELECT * FROM users WHERE username = 'user_input_username' AND password = 'user_input_password'`

An attacker could enter `' OR '1'='1` as the password. The resulting query would be:

`SELECT * FROM users WHERE username = 'user_input_username' AND password = '' OR '1'='1'`

Since `'1'='1'` is always true, the database would authenticate the attacker, bypassing the need for a correct password.

### Ways to Prevent SQL Injection

#### 1. Use Prepared Statements (Parameterized Queries)

This is the most effective defense. Instead of building the SQL query as a string, you define the query structure first and then pass the user input as separate parameters. The database engine then treats the user input as a literal value, not as executable code. 

`PreparedStatement statement = connection.prepareStatement("SELECT * FROM users WHERE username = ? AND password = ?");`
`statement.setString(1, user_input_username);`
`statement.setString(2, user_input_password);`
`ResultSet result = statement.executeQuery();`

This method prevents the attacker's input from changing the query's logic.

#### 2. Input Validation and Sanitization

While not a complete solution on its own, it's a crucial layer of defense.

* **Input Validation**: Check if user input conforms to expected formats (e.g., ensuring a username is alphanumeric and a specific length).
* **Input Sanitization**: Remove or escape special characters that could be used in a SQL injection attack. However, this method can be error-prone and is not as reliable as prepared statements.

#### 3. Principle of Least Privilege

The database user account used by the application should only have the minimum necessary permissions. For example, a web application's database user should not have permissions to drop tables, delete databases, or access sensitive information outside of its specific scope. This limits the damage an attacker can do even if a SQL injection is successful.

#### 4. Web Application Firewalls (WAFs)

A WAF can act as a shield, filtering and blocking malicious requests before they even reach the web application. While helpful, WAFs are not a substitute for secure coding practices, as they can sometimes be bypassed.
