## 12. What are **window functions**, and how do they differ from aggregate functions?

Window functions perform a calculation across a set of table rows that are related to the current row. Unlike aggregate functions, they do not collapse the rows into a single output row. Instead, they produce a result for each row in the original dataset.

The key difference lies in how they handle rows:

* **Aggregate Functions** (e.g., `SUM()`, `AVG()`, `COUNT()`) group rows and return a single value for each group. For example, `SELECT department, SUM(salary) FROM employees GROUP BY department;` returns one row per department.
* **Window Functions** perform a calculation over a "window" of rows and return a result for *each row*. For example, you could use a window function to show each employee's salary alongside the average salary for their department.

***

### Key Concepts and Syntax

Window functions use the `OVER` clause, which defines the window of rows. This clause can include:

* **`PARTITION BY`**: Divides the rows into partitions, similar to a `GROUP BY` clause. The function is then applied independently to each partition.
* **`ORDER BY`**: Orders the rows within each partition. This is crucial for functions that depend on row order, such as `RANK()` or `ROW_NUMBER()`.

The basic syntax is:

`function_name(column_name) OVER (PARTITION BY column_1 ORDER BY column_2)`

### Types of Window Functions

Window functions fall into three main categories:

1.  **Aggregate Window Functions**: These are standard aggregate functions used as window functions. They compute a value (like `AVG`, `SUM`, `MIN`, `MAX`) for each row based on its window.
2.  **Ranking Window Functions**: These functions assign a rank to each row within its partition. Common examples include `RANK()`, `DENSE_RANK()`, and `ROW_NUMBER()`.
3.  **Value Window Functions**: These functions access values from a row at a specific offset from the current row. Examples include `LAG()` (accesses a value from a preceding row) and `LEAD()` (accesses a value from a following row).
