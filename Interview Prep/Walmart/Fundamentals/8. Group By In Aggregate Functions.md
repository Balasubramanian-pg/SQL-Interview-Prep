# 8. *What happens when you use an aggregate function without a `GROUP BY` clause?*

## Aggregate Function Without GROUP BY

*   **Single Result Set**
> [!IMPORTANT]
> Returns exactly one row summarizing the entire table.
*   All rows are treated as one big group.
*   The aggregate function calculates across all selected rows.
*   You get a single value representing the entire dataset.

*   **Common Aggregate Functions**
*   `COUNT()` - Number of rows
*   `SUM()` - Total of numeric values
*   `AVG()` - Average of numeric values
*   `MAX()` - Highest value
*   `MIN()` - Lowest value

**SQL Examples**

*   **Basic Usage**
```sql
-- Returns one row with employee count
SELECT COUNT(*) AS TotalEmployees FROM Employees;

-- Returns one row with average salary
SELECT AVG(Salary) AS AverageSalary FROM Employees;

-- Returns one row with total sales
SELECT SUM(SalesAmount) AS TotalSales FROM Orders;
```

*   **Multiple Aggregates**
> [!NOTE]
> You can use multiple aggregates in the same query.
```sql
-- Returns one row with multiple summary statistics
SELECT 
    COUNT(*) AS TotalEmployees,
    AVG(Salary) AS AverageSalary,
    MAX(Salary) AS HighestSalary,
    MIN(Salary) AS LowestSalary
FROM Employees;
```

*   **With WHERE Clause**
> [!TIP]
> The WHERE clause filters rows BEFORE aggregation.
```sql
-- Returns average salary only for IT department
SELECT AVG(Salary) AS ITAverageSalary
FROM Employees
WHERE Department = 'IT';
```

**What You CANNOT Do**

*   **Mixing Columns and Aggregates**
> [!CAUTION]
> Cannot combine regular columns with aggregates without GROUP BY.
```sql
-- INVALID: Which department to show with the average?
SELECT Department, AVG(Salary) 
FROM Employees;

-- VALID: Use GROUP BY instead
SELECT Department, AVG(Salary)
FROM Employees
GROUP BY Department;
```

*   **Multiple Non-Aggregated Columns**
```sql
-- INVALID: Ambiguous which employee name to return
SELECT EmployeeName, AVG(Salary)
FROM Employees;
```

**Practical Use Cases**

*   **Dashboard Metrics**
> [!TIP]
> Perfect for KPI calculations and summary statistics.
```sql
-- Get key business metrics in one row
SELECT
    COUNT(*) AS TotalCustomers,
    SUM(OrderAmount) AS TotalRevenue,
    AVG(OrderAmount) AS AverageOrderValue
FROM Orders
WHERE OrderDate >= '2024-01-01';
```

*   **Data Quality Checks**
```sql
-- Quick data validation
SELECT
    COUNT(*) AS TotalRows,
    COUNT(Email) AS EmailsPopulated,
    COUNT(DISTINCT CustomerID) AS UniqueCustomers
FROM Customers;
```

**Database Behavior**

*   **Implicit GROUP BY**
> [!NOTE]
> The database treats the entire table as one group when no GROUP BY is specified.
*   No grouping columns are needed in the result.
*   All aggregate functions operate on the complete filtered dataset.
*   Returns exactly one row regardless of table size (unless no rows).

*   **Empty Table Handling**
```sql
-- Returns 1 row with NULL values if table is empty
SELECT AVG(Salary) FROM Employees WHERE 1=0;
```
