# Customers Who Have Never Placed an Order Analysis

## Problem Statement
A business needs to identify customers who have registered in their system but have never made any purchases. This analysis helps with:
- Targeting inactive customers with special promotions
- Cleaning up the customer database
- Understanding customer acquisition to conversion ratios
- Identifying potential issues in the onboarding process

## Database Schema

```sql
CREATE TABLE Customers (
    customer_id INT PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

CREATE TABLE Orders (
    order_id INT PRIMARY KEY,
    customer_id INT NOT NULL,
    FOREIGN KEY (customer_id) REFERENCES Customers(customer_id)
);
```

**Tables Structure:**
- **Customers**:
  - `customer_id`: Unique identifier for each customer (Primary Key)
  - `name`: Customer's full name

- **Orders**:
  - `order_id`: Unique identifier for each order (Primary Key)
  - `customer_id`: Reference to the customer who placed the order (Foreign Key)

## Sample Data

**Customers Table:**
| customer_id | name          |
|-------------|---------------|
| 1           | John Smith    |
| 2           | Emily Davis   |
| 3           | Michael Brown |
| 4           | Sarah Wilson  |
| 5           | David Lee     |

**Orders Table:**
| order_id | customer_id |
|----------|-------------|
| 101      | 1           |
| 102      | 1           |
| 103      | 3           |
| 104      | 5           |
| 105      | 5           |

## SQL Solution

```sql
SELECT c.customer_id, c.name
FROM Customers c
LEFT JOIN Orders o ON c.customer_id = o.customer_id
WHERE o.customer_id IS NULL;
```

## Solution Explanation

1. **LEFT JOIN Operation**:
   - Keeps ALL records from the Customers table (left table)
   - Includes matching records from the Orders table (right table)
   - For customers with no orders, all Order columns will be NULL

2. **WHERE Clause**:
   - Filters for rows where the Orders.customer_id is NULL
   - This identifies customers who have no matching records in the Orders table

3. **Result Columns**:
   - Returns only the customer_id and name from the Customers table
   - No order information is needed since we're looking for absence of orders

## Expected Results

Using the sample data, the query would return:

| customer_id | name          |
|-------------|---------------|
| 2           | Emily Davis   |
| 4           | Sarah Wilson  |

**Key Observations**:
- Emily Davis (ID 2) and Sarah Wilson (ID 4) have never placed any orders
- John Smith (ID 1) is the most active customer with 2 orders
- Michael Brown (ID 3) and David Lee (ID 5) have each placed orders

## Alternative Approaches

1. **Using NOT EXISTS**:
   ```sql
   SELECT customer_id, name
   FROM Customers c
   WHERE NOT EXISTS (
       SELECT 1
       FROM Orders o
       WHERE o.customer_id = c.customer_id
   );
   ```

2. **Using NOT IN**:
   ```sql
   SELECT customer_id, name
   FROM Customers
   WHERE customer_id NOT IN (
       SELECT DISTINCT customer_id
       FROM Orders
   );
   ```

## Performance Considerations

1. **For large datasets**:
   - LEFT JOIN with NULL check is generally efficient
   - NOT EXISTS often performs better than NOT IN with subqueries
   - Ensure proper indexing on customer_id in both tables

2. **Indexing Recommendations**:
   ```sql
   CREATE INDEX idx_orders_customer_id ON Orders(customer_id);
   ```

## Business Applications

1. **Marketing Campaigns**:
   - Target these customers with "first purchase" discounts
   - Send reminder emails about products they might like

2. **Customer Service**:
   - Reach out to understand why they haven't ordered
   - Offer assistance with any onboarding difficulties

3. **Data Quality**:
   - Verify if these are legitimate customers or test accounts
   - Consider purging very old inactive accounts

## Extended Analysis

To get more insights, you could:

1. **Add registration date**:
   ```sql
   SELECT c.customer_id, c.name, c.registration_date
   FROM Customers c
   LEFT JOIN Orders o ON c.customer_id = o.customer_id
   WHERE o.customer_id IS NULL
   ORDER BY c.registration_date;
   ```

2. **Segment by inactivity period**:
   ```sql
   SELECT c.customer_id, c.name,
          DATEDIFF(CURRENT_DATE, c.registration_date) AS days_inactive
   FROM Customers c
   LEFT JOIN Orders o ON c.customer_id = o.customer_id
   WHERE o.customer_id IS NULL
   ORDER BY days_inactive DESC;
   ```

3. **Combine with customer demographics** (if available):
   ```sql
   SELECT c.customer_id, c.name, c.location, c.age_group
   FROM Customers c
   LEFT JOIN Orders o ON c.customer_id = o.customer_id
   WHERE o.customer_id IS NULL;
   ```
