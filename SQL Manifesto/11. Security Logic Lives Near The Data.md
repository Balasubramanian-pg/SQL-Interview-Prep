## Data Engineering Manifesto

### Rule 11: Security Logic Lives Near the Data

Security enforced at the edges is an illusion.
Real security is enforced where the data lives.

User interfaces change. Applications evolve. Integrations multiply. The database remains the final authority.

### The Principle

**Row-level and column-level security must be enforced in SQL.**

If access control does not live with the data, it is optional in practice.

### Why UI-Only Security Fails

UI security assumes:

* Every access path goes through the UI
* Every client is well-behaved
* Every future integration follows the same rules

None of these assumptions hold over time.

APIs, ad hoc queries, exports, background jobs, and new tools bypass UI logic by default. If security is not enforced in the database, it will be bypassed.

### Enforce Security Through Views

Views define controlled perspectives of data.

* Filter rows based on user context
* Mask or exclude sensitive columns
* Centralize access rules

A view is a contract. Consumers see only what the contract allows.

### Use Policies Where Available

Modern databases support native security policies.

* Row access policies
* Column masking policies
* Predicate-based filters

These mechanisms are declarative, auditable, and consistently enforced, regardless of access path.

### Secure Functions for Context-Aware Logic

When security depends on context:

* Use secure functions
* Encapsulate identity logic
* Avoid duplicating rules across queries

Security logic scattered across SQL is untestable and brittle. Centralization is protection.

### Why “Defense in Depth” Starts Here

Application security and UI controls are valuable. They are not sufficient.

The database must assume:

* Queries will be written manually
* New tools will be added
* Mistakes will be made

Security near the data ensures that every access path obeys the same rules.

### Design Standard

Security logic must be:

* Centralized
* Declarative
* Auditable
* Enforced by the database engine

If a query can bypass security by skipping a view, the design is broken.

### Code Review Test

Before approving access logic, ask:

* Can this be bypassed by a direct query?
* Does every access path enforce the same rules?
* Is the logic centralized and visible?

If the answer is no, the system is not secure.

### Closing Statement

UI security protects appearances.
Data security protects truth.

If security does not live with the data, it does not truly exist.

Say **next** when you are ready to continue.
